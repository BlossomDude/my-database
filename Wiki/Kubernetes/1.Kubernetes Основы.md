---
Owner: Blossom Dude
Last edited time: 2024-05-26T16:36
Created time: 2023-11-15T14:58
---
> [!important]  
> Эмулятор для обучения k8s:https://labs.play-with-k8s.com  
  

### Основные понятия

| Понятие\команда\…                                     | Описание                                                                                                                                                                                                                                                                                                                          |
| ----------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| CNI (Container Networking Interface)                  | Сетевой интерфейс контейнера                                                                                                                                                                                                                                                                                                      |
| control plane                                         | мозг кластера K8s, управляет всеми объектами k8s  <br>  <br>В него входяит сервер API, планировщика, диспетчера контроллеров и другие контроллеры                                                                                                                                                                                 |
| CSI (Container Storage Intraface)                     | Интерфейс хранилища для контейнера                                                                                                                                                                                                                                                                                                |
| DaemonSet                                             | Аналог Deployment’a, но выполняется на каждом узле кластера                                                                                                                                                                                                                                                                       |
| node                                                  | машина на котором запущен ==kubelet==                                                                                                                                                                                                                                                                                             |
| kube-proxy                                            | Служба, которая управляет правилами балансировки нагрузки. Она конфигурирует правила IPVS или iptables, через которые выполняются проксирование и роутинг. Работает на worker-нодах;                                                                                                                                              |
| kube-controller-manager*                              | демон, который действует как непрерывный цикл управления в кластере ==Kubernetes==.                                                                                                                                                                                                                                               |
| kubectl                                               | программа для управления K8s кластером                                                                                                                                                                                                                                                                                            |
| minicube                                              | это инструмент для локального развертывания единственной ноды ==Kubernetes==.                                                                                                                                                                                                                                                     |
| pod                                                   | Объект ==k8s==, инкапсулирующий действующий контейнер.                                                                                                                                                                                                                                                                            |
| Replica Set  <br>Replication Controller  <br>rc  <br> | Гарантирует наличие работающих подов на узлах которое ты задал. Так же обеспечивает балансировку нагрузки и эластичность. ==**Replica Set новее.**==                                                                                                                                                                              |
| Rollout                                               | Версионирование Deployment’ов, при создании deploy создается его снэпшот, и так же создается каждый раз когда меняется версия                                                                                                                                                                                                     |


### etcd

- ETCD - В нем хранится состояние всего кластера. Главная задача etcd — обеспечить отказоустойчивость кластера и консистентность данных. Etcd — самостоятельный проект. Он развивается отдельно от Kubernetes и применяется в разных продуктах. Работает на master-нодах;

---
### kube-sheduler

kube-sheduler - Компонент k8s, планирующий, на каких узлах разворачивать поды. Он учитывает такие факторы, как ограничения, требования к ресурсам, местонахождение данных и пр. Работает на master-нодах;

---
### kube-apiserver

kube-apiserver - с его помощью обеспечивается работа API кластера, обрабатываются REST-операции и предоставляется интерфейс, через который остальные компоненты взаимодействуют друг с другом. Также через него проходят запросы на изменение состояния или чтение кластера. Работает на master-нодах;

---
### kubelet

kubelet - Это агент, который работает на каждом рабочем узле в кластере Kubernetes. Он отвечает за управление жизненным циклом подов на рабочем узле. Kubelet следит за состоянием подов, запускает и останавливает их, проверяет их здоровье, а также обеспечивает связь с мастер-узлом для получения инструкций и обновлений.

---
### kube-proxy

kube-proxy - Служба, которая управляет правилами балансировки нагрузки. Она конфигурирует правила IPVS или iptables, через которые выполняются проксирование и роутинг. Обеспечивает связь между сервисами внутри кластера. Работает на worker-нодах;

---

### OCI, CRI, CRE, dockershim
---
##### CRE (Container Runtime Engine)

- CRE (Container Runtime Engine) - это среда запуска контейнеров. Их много - Docker, CRI-o, ContainerD, runc и тд.

----
##### OCI (Open Container Initiative)

- Раньше K8s использовал только докер в качестве среды запусков контейнеров. Но после этого были выпущены другие CRE (Container Runtime Engine) И их становилось все больше.  
- В связи с этим была создана OCI (Open Container Initiative) - спецификация которая определяла как должен быть построен image (imagespec) и как должен разрабатываться CRE (runtimespec).
- OCI (Open Container Initiative) -  состоит из двух спецификаций - runtimespec и imagecpec.

---
##### CRI (Container Runtime Interface)

- CRI (Container Runtime Interface) - Интерфейс предоставляемый Kubernetes для разработчиков CRE чтобы их container runtime мог работать с k8s, при условии что они соответствуют стандартам OCI (Open Container Initiative). Все, кроме Docker.

- `crictl` - инструмент командной строки для отладки контейнеров и подов, который работает напрямую с kubelet и разрабатывается сообществом kubernetes.

---
##### docker-shim

> [!Info] 
> Поддержка docker (docker-shim) была прекращена с версии Kubernetes v1.24
> 
> Однако все равно есть возможность используя CRI-Dockerd самому настроить crictl для работы с docker.
> 

- docker-shim - интерфейс для работы docker с k8s.

- Docker имеет такое отличие т.к. в него входит много модулей которые его делают не просто container runtime.  Он содержит в себе множество инструментов такие как инструменты сборки, CLI, API, AUTH, SECURITY и containerd который сам по себе является CRE и может работать с k8s через CRI.



