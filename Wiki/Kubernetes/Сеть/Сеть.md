Важная составляющая нашего кластера это сеть. Без сети мы бы не смогли отправлять запросы к kube-apiserver, мы не могли бы получить доступ к подам и так далее.

Каждый узел, в том числе мастер - должен иметь минимум один настроенный сетевой интерфейс для общения, а так же порты для общения наших компонентов.


| Component               | port        |
| ----------------------- | ----------- |
| kube-apiserver          | 6443        |
| kube-scheduler          | 10259       |
| kube-controller-manager | 10257       |
| etcd                    | 2379, 2380  |
| kubelet                 | 10250       |
| worker-nodes            | 30000-32767 |

## CNI 
Плагины CNI хранятся на мастер узле в директории:
`/opt/bin/cni/`

Конфигурация плагинов находится в директории:
`/etc/cni/net.d/`
Файл конфигурации выбирается в алфавитном порядке.

Пример файла конфигурации:
```json
{
    "cniVersion": "1.1.0",
    "name": "dbnet",
    "type": "bridge",
    "bridge": "cni0",
    "keyA": ["some more", "plugin specific", "configuration"],
    "ipam": {
        "type": "host-local",
        "subnet": "10.1.0.0/16",
        "gateway": "10.1.0.1"
    },
    "dns": {
        "nameservers": [ "10.1.0.1" ]
    }
}
```

- `cniVersion: "1.1.0"` — указывает версию спецификации CNI, используемую в этой конфигурации. Важно для обеспечения совместимости между CNI-плагинами и инфраструктурой.
- `name: dbnet` — уникальное имя сети, которое будет использоваться для идентификации.
    - Это имя помогает различать разные сети в одной системе.
- `type: "bridge"` — тип плагина. Указывает, что сеть будет создаваться с использованием мостового интерфейса.
- `bridge: "cni0"` — имя мостового интерфейса на хосте, который создаст плагин.
    - Если интерфейс `cni0` уже существует, плагин будет использовать его.
- `keyA: ["some more", "plugin specific", "configuration"]` — дополнительная, специфичная для плагина конфигурация.
    - Она позволяет передавать кастомные параметры, которые может обрабатывать только данный плагин.
- **`ipam`** (IP Address Management):
    - Настройки управления IP-адресами для этой сети.
        - **`type`**: `"host-local"` — локальное управление IP-адресами, где адреса хранятся на хосте.
        - **`subnet`**: `"10.1.0.0/16"` — диапазон IP-адресов, доступный для выделения контейнерам.
        - **`gateway`**: `"10.1.0.1"` — IP-адрес шлюза для этой сети. Все внешние пакеты будут проходить через этот адрес.
- `dns: nameservers`:
        - `["10.1.0.1"]` — адрес DNS-сервера, который будет использоваться контейнерами для разрешения доменных имен.

##### Weave
- На каждом узле назначает своего агента
- По умолчанию выдает ip в диапазоне 10.32.0.0/12
- 