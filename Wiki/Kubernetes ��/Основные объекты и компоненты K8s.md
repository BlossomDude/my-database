---
Owner: Blossom Dude
Last edited time: 2024-04-25T13:23
Created time: 2023-11-22T14:49
---
> [!important]  
> kubectl - программа для управления K8s кластером  

Основные понятия

Компоненты

Nodes

Cluster

Объекты

## Основные понятия

|Понятие\команда\…|Описание|
|---|---|
|**==CNI (Container Networkink Interface)==**|Сетевой интерфейс контейнера|
|**==control plane==**|мозг кластера ==K8s==, управляет всеми объектами ==k8s  <br>  <br>==В него входяит сервер ==API==, планировщика, диспетчера контроллеров и другие контроллеры|
|**==CSI (Container Storage Intraface)==**|Интерфейс хранилища для контейнера|
|==**DaemonSet**==|Аналог Deployment’a, но выполняется на каждом узле кластера|
|**==etcd==**|Распределенное хранилище в формате «ключ-значение». В нем хранится состояние всего кластера. Главная задача etcd — обеспечить отказоустойчивость кластера и консистентность данных. Etcd — самостоятельный проект. Он развивается отдельно от Kubernetes и применяется в разных продуктах. Работает на master-нодах;|
|**==node==**|машина на котором запущен ==kubelet==|
|==kube-apiserver==|С помощью сервера API обеспечивается работа API кластера, обрабатываются REST-операции и предоставляется интерфейс, через который остальные компоненты взаимодействуют друг с другом. Также через него проходят запросы на изменение состояния или чтение кластера. Работает на master-нодах;|
|==kube-proxy==|Служба, которая управляет правилами балансировки нагрузки. Она конфигурирует правила IPVS или iptables, через которые выполняются проксирование и роутинг. Работает на worker-нодах;|
|==**kube-controller-manager**==|демон, который действует как непрерывный цикл управления в кластере ==Kubernetes==.|
|==kube-sheduler==|Компонент, планирующий, на каких узлах разворачивать поды. Он учитывает такие факторы, как ограничения, требования к ресурсам, местонахождение данных и пр. Работает на master-нодах;|
|**==kubectl==**|программа для управления K8s кластером|
|==**kubelet**==|Это агент, который работает на каждом рабочем узле в кластере ==Kubernetes==. Он отвечает за управление жизненным циклом подов на рабочем узле. ==Kubelet== следит за состоянием подов, запускает и останавливает их, проверяет их здоровье, а также обеспечивает связь с ==мастер-узлом== для получения инструкций и обновлений.|
|**==minicube==**|это инструмент для локального развертывания единственной ноды ==Kubernetes==.|
|==**pod**==|Объект ==k8s==, инкапсулирующий действующий контейнер.|
|**==OCI - Open Container Initiative==**|общее положении о том какими должны быть контейнеры. Кто придерживается этого стандарта, может использовать ==k8s== в качестве оркестратора.|
|==Replica Set  <br>Replication Controller  <br>rc  <br>==|Гарантирует наличие работающих подов на узлах которое ты задал. Так же обеспечивает балансировку нагрузки и эластичность. ==**Replica Set новее.**==|
|==Rollout==|Версионирование Deployment’ов, при создании deploy создается его снэпшот, и так же создается каждый раз когда меняется версия|

  

## Компоненты

==Kubernetes== состоит из двух главных компонентов:

### Nodes

По своей сути сервер\узел\нода. Бывает двух типов.  
  
Типы:  

- ==Worker Node== - сервер на котором запускаются и работают контейнеры.
- ==Master Node== - сервер который управляет воркерами.  
      
    

> [!important]  
> Когда мы запускаем команды, они отправляются на Master, то есть с кластером мы работает не напрямую.  

### Cluster

==Cluster== - это некоторое колличество **Nodes** связанных между собой.

K8s состоит из:

- Минимум одного ==Master Node== (2 и более в случае большого кластера)
- И нескольких ==Worker Node.==

  

## Объекты

- ==**Pod**== - состоит из одного или нескольких контейнеров
- ==**Deployment**== - состоит из одного или нескольких **одинаковых pod’s,** нужен для автоматического масштабирования и получение желаемого количества под. Так же у каждого пода будет свое днс имя.
- ==**Service**== - Предоставляет доступ к Deployment через:
    
    - ClusterIP, NodePort, LoadBalancer, ExternalName
    
    [[Services]]
    
- ==**Node**== - сервер
- ==**Cluster**== - Объединения серверов
- и др….
    
    - ==DeamonSets==
    - ==StatefulSets -== В манифесте можно определить Volume в отличии от Deployment. В Deployment к каждому поду нужно прикручивать отдельный PersistantVolume
    - ==RepicaSets==
    - ==Secrets==
    - ==PV==
    - ==SVC==
    - ==LoadBalancers==
    - ==ConfigMaps==
    - ==Vertical Pod Autoscaler==
    - ==Horizontal Pod Autoscaler== - Автоматическое масштабирование на разных нодах для отказоустойчивости
        
        [[HPA - Autoscaler]]