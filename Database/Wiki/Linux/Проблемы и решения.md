---
Owner: Blossom Dude
Last edited time: 2023-11-30T11:31
Created time: 2023-11-30T10:04
---
## Память, дисковое пространство и т.д.

==Проблема:==  
Свободно пару гигов, но df показывает отсутствие памяти!  
  
==Решение:==  
  
`tune2fs -m 1 /dev/sda3` - изменить резерв памяти для рута до 1% (5% по умолчанию)

  

## Траблшутинг

==Проблема:==  
Сервер лагаеть! Ниче не понятно!  
**ПА-МА-ГИ-ТИ!**  
  
==Решение:  
  
==Чек лист для выявления ошибок в ==linux== системе:

- `uptime` или `htop` или `top` - Проверь ==LA!==
- `htop` или `top` или `vmstat` - Проверь нагрузку на ==ЦП!==
- `free -m` или `vmstat` - Проверь потребление ==памяти!==
- `iostat` или `iotop` - проверь потребление ==диска!==
- `sar` - Проверь нагрузку ==сети!==
- `ps` или `pidstat` - проверь потребление ресурсов ==отдельным процессом!==

- ==_Табличка по полезным командам для выявления проблемы_==_._
    
    |   |   |   |
    |---|---|---|
    |№|Команда|Проверяет|
    |1|`uptime`|Средние значения нагрузки, чтобы определить, увеличивается  <br>или уменьшается нагрузка (можно сравнить средние значения  <br>за 1, 5 и 15 минут)|
    |2|`dmesg -T \| tail`|Ошибки в ядре, включая события OOM (нехватки памяти)|
    |3|`vmstat -SM 1`|Общесистемные статистики: длина очереди на выполнение,  <br>подкачка (swapping), общая доля занятости процессора|
    |4|`mpstat -P ALL 1`|Баланс нагрузки по процессорам: увеличенная нагрузка на  <br>один из процессоров может указывать на плохое масштабирование потоков выполнения|
    |5|`pidstat 1`|Потребление процессора каждым процессом: позволяет выявить непредвиденных потребителей процессорного времени  <br>и определить, сколько процессорного времени потрачено  <br>каждым процессом в пространстве ядра и в пространстве пользователя|
    |6|`iostat -sxz 1`|Статистики дискового ввода/вывода: количество операций  <br>ввода/вывода в секунду (IOPS) и пропускная способность,  <br>среднее время ожидания, процент занятости|
    |7|`free -m`|Потребление памяти, включая кэши файловой системы|
    |8|`sar -n DEV 1`|Статистики сетевого устройства ввода/вывода: количество пакетов и пропускная способност|
    |9|`sar -n TCP, ETCP`|Статистики TCP: частота приема соединений, частота повторных  <br>передач|
    |10|`top`|Общий обзор|