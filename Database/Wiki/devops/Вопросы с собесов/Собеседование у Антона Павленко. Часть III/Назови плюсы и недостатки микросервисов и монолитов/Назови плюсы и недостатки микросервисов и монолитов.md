---
Owner: Blossom Dude
Last edited time: 2023-11-15T17:41
Created time: 2023-11-15T17:41
---
Доп. вопросы

Какие протоколы межсервисного взаимодействия ты знаешь?

SOAP

REST

GraphQL

gRPC

WebSocket

Источники

**Микросервисы**.

Плюсы:

- _**Гибкость по Agile**_ - возможность частых релизов каждых микросервисов для отдельных команд
- _**Удобное масштабирование по сервисам**_. Например у нас определенный модуль приложения наиболее загружен, мы можем отдельно его отмасштабировать не трогая остальные
- Из-за уменьшения кодовой базы _**ускоряется процесс CI/CD**_
- _**Простор для экспериментов**_ (разные ЯП, библиотеки и т.п.)
- _**Повышается надежность**_, так как если упадет одно приложение остальные микросервисы (если у вас не микросервисный-монолит) должны работать

Недостатки:

- _**Усложнение процесса разработки**_, так как со временем появляется большое количество сервисов созданные разными командами разработки и требуется больше времени для коммуникации между командами. Если такой рост не контролировать, то это может замедлить процесс разработки еще сильней, чем монолитная архитектура
- **Экспоненциальный** **рост расходов на инфраструктуру:**
    - для каждого микросервиса нужно 3+ реплики для достижения HA
    - больше машин для тестирования и сборки во время CI/CD pipeline
- _**Проблемы при отладке**_ взаимодействия разных микросервисов
- Недостаток вытекающий из плюса - _**отсутствие стандартизации технологий**_.

  

**Монолиты**.

Плюсы:

- _**Простота разработки и развертывания**_
- _**Меньше кода по сравнению с монолитами**_
- _**Простота тестирования и отладки**_

Недостатки:

- _**Снижение скорости разработки**_
- _**Невозможность масштабируемости**_ отдельных компонентов
- _**Ошибка в одном модуле может повлиять на работу всего приложения**_
- _**Сложности для внедрения технологий**_ (смена ЯП, добавление библиотек), так как весь код испольуется один ЯП и библиотеки

  

# Доп. вопросы

## Какие протоколы межсервисного взаимодействия ты знаешь?

### SOAP

_**SOAP**_ (_Simple Object Access Protocol_) - это протокол межсервисного взаимодействия через HTTP сообщения формата XML.

Недостатки SOAP:

- объемные сообщения
- поддержка только одного формата — XML
- схема работы по принципу «один запрос — один ответ»
- смена описания веб-сервиса может нарушить работу клиента

SOAP считается устаревшим и вытесненным подходом REST, который устранил большинство недостатков протокола SOAP.

### REST

_**REST**_ (_Representational state transfer_) - это архитектурный подход проектирования HTTP-интерфейсов приложения. Общение между сервисами происходит за счет HTTP-запросов на определенный “эндпоинт”, например: `GET /users`

### **GraphQL**

_**GraphQL**_ - язык запросов для общения фронтенда с бэкендом. В отличие от REST, есть единая точка входа - `/graphql` и клиент решает какие данные ему нужны, а не backend в случае REST. У этого подхода есть как ряд плюсов (декларативность, типизация), так и ряд недостатков ([читать тут](https://habr.com/ru/articles/728476/)).

Язык запросов выглядит как граф зависимостей, где зависимостью может быть поле или связанная сущность:

```GraphQL
{
  users {
    id
    name
    age
    email
    posts {
      id
      title
      body
    }
  }
}
```

### gRPC

_**gRPC**_ - бинарный протокол вызова процедур, работающий повверх `HTTP/2`. Для кодирования и декодирования информации используется протокол сериализации _**protobuf**_ (_protocol buffers_). Protobuf похож на объявление структур в языке C и сохраняется в файлах с типом `.proto`, затем эти файлы компилируются в язык приложения. Синтаксис:

```Protobuf
// Синтакс для данного файла proto3
syntax = "proto3";

/* Наименование пакета данных */
message Calculator {
    int32 xxx = 1;
    int32 yyy = 2;
}

message CalculatorRequest {
    Calculator calculator = 1;
}

message CalculatorResponse {
    int32 result = 1;
}

/* Наименование сервиса, который будет осуществлять
 калькуляцию данных полей xxx и yyy
*/
service CalculatorService {
    rpc Calculator(CalculatorRequest) returns (CalculatorResponse) {};
}
```

### **WebSocket**

_**WebSocket**_ (_WS_) - протокол на основе TCP для установления постоянного двунаправленного соединения между клиентом и сервером. Широко используется в чатах.

![[/Untitled 24.png|Untitled 24.png]]

  

# Источники

1. (статья) **Сравнение микросервисной и монолитной архитектур**: [https://www.atlassian.com/ru/microservices/microservices-architecture/microservices-vs-monolith](https://www.atlassian.com/ru/microservices/microservices-architecture/microservices-vs-monolith)
2. (статья) **Клиент-серверное и межсервисное взаимодействие: разбираемся в REST, GraphQL, RPC и WebSocket**: [https://habr.com/ru/articles/729528/](https://habr.com/ru/articles/729528/)
3. (статья) **GraphQL: от восторга до разочарования**: [https://habr.com/ru/articles/728476/](https://habr.com/ru/articles/728476/)
4. (видео) **GraphQL, что ты такое? || Охэхэнный бекенд**: [https://www.youtube.com/watch?v=kqA17iwAyqw](https://www.youtube.com/watch?v=kqA17iwAyqw)
5. (статья) **SOAP API**: [https://blog.skillfactory.ru/glossary/soap-api/](https://blog.skillfactory.ru/glossary/soap-api/)
6. (видео) **Введение в protobuf**: [https://www.youtube.com/watch?v=W0rh1Pv5r7Y](https://www.youtube.com/watch?v=W0rh1Pv5r7Y)
7. (видео) **Web сокеты | Компьютерные сети. Продвинутые темы**: [https://www.youtube.com/watch?v=TxVriqBkqbM](https://www.youtube.com/watch?v=TxVriqBkqbM)
8. (статья) **gRPC и все-все-все: Часть I. Введение**: [https://proglib.io/p/grpc-i-vse-vse-vse-chast-i-vvedenie-2021-03-26](https://proglib.io/p/grpc-i-vse-vse-vse-chast-i-vvedenie-2021-03-26)